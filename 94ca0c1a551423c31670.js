(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{120:function(t,e,r){"use strict";var i=r(89);r.n(i).a},121:function(t,e,r){"use strict";var i=r(90);r.n(i).a},122:function(t,e,r){"use strict";var i=r(91);r.n(i).a},132:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return M}));var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"reviews-page-component page-component"},[r("div",{staticClass:"page-content"},[r("div",{staticClass:"container"},[t._m(0),t._v(" "),t.emptyFormIsShow?r("div",{staticClass:"form"},[r("app-form-reviews",{attrs:{currentReview:t.currentReview,editMode:t.editMode},on:{reset:t.FormIsShow}})],1):t._e(),t._v(" "),r("ul",{staticClass:"cards"},[r("li",{staticClass:"item"},[r("square-btn",{attrs:{type:"square",title:"Добавить отзыв"},on:{click:function(e){t.emptyFormIsShow=!0}}})],1),t._v(" "),t._l(t.reviews,(function(e){return r("li",{key:e.id,staticClass:"item"},[r("review-card",{attrs:{review:e},on:{edit:function(r){return t.editReviewCard(e)},remove:function(r){return t.removeReview(e)}}})],1)}))],2)])])])};i._withStripped=!0;var n=r(0),s=r.n(n),a=r(1),o=r.n(a),c=r(19),u=r.n(c),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-reviews-component"},[r("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)},reset:t.handleReset}},[r("card",{attrs:{title:"Новый отзыв"}},[r("div",{staticClass:"form-container",attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"form-data"},[r("div",{staticClass:"uploader-img"},[r("label",{class:["uploader",{active:t.newReview.preview},{hovered:t.hovered}],style:{backgroundImage:"url("+t.newReview.preview+")"},on:{dragover:t.handleDragOver,dragleave:function(e){t.hovered=!1},drop:t.handleChange}},[r("div",{staticClass:"uploader-btn"},[r("app-button",{attrs:{errorMessage:t.validation.firstError("newReview.photo"),typeAttr:"plainfile",title:"Добавить фото"},on:{change:t.handleChange}})],1)])]),t._v(" "),r("div",{staticClass:"form-text"},[r("div",{staticClass:"form-row"},[r("app-input",{staticClass:"autor",attrs:{errorMessage:t.validation.firstError("newReview.author"),title:"Имя автора"},model:{value:t.newReview.author,callback:function(e){t.$set(t.newReview,"author",e)},expression:"newReview.author"}}),t._v(" "),r("app-input",{staticClass:"autor",attrs:{errorMessage:t.validation.firstError("newReview.occ"),title:"Титул автора"},model:{value:t.newReview.occ,callback:function(e){t.$set(t.newReview,"occ",e)},expression:"newReview.occ"}})],1),t._v(" "),r("div",{staticClass:"form-row"},[r("app-input",{staticClass:"textarea",attrs:{errorMessage:t.validation.firstError("newReview.text"),"field-type":"textarea",title:"Отзыв"},model:{value:t.newReview.text,callback:function(e){t.$set(t.newReview,"text",e)},expression:"newReview.text"}})],1)])]),t._v(" "),r("div",{staticClass:"form-btns"},[r("div",{staticClass:"btn"},[r("app-button",{attrs:{title:"Отмена",typeAttr:"reset",plain:""}})],1),t._v(" "),r("div",{staticClass:"btn"},[r("app-button",{attrs:{title:"Сохранить",typeAttr:"submit"}})],1)])])])],1)])};l._withStripped=!0;var v=r(70),p=r(66),d=r(67),w=r(7),f=r(43);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _={components:{card:v.a,appButton:p.a,appInput:d.default},data:function(){return{hovered:!1,newReview:{photo:{},author:"",occ:"",text:"",preview:"",id:""}}},props:{currentReview:{type:Object,default:{}},editMode:Boolean,emptyFormIsShow:Boolean},mixins:[f.mixin],validators:{"newReview.author":function(t){return f.Validator.value(t).required("Не может быть пустым")},"newReview.occ":function(t){return f.Validator.value(t).required("Не может быть пустым")},"newReview.text":function(t){return f.Validator.value(t).required("Не может быть пустым")},"newReview.photo":function(t){return f.Validator.value(t).required("Не может быть пустым")}},watch:{currentReview:function(){this.editMode&&(this.newReview.author=this.currentReview.author,this.newReview.occ=this.currentReview.occ,this.newReview.text=this.currentReview.text,this.newReview.preview="https://webdev-api.loftschool.com/".concat(this.currentReview.photo),this.newReview.photo={},this.newReview.id=this.currentReview.id)}},methods:m(m({},Object(w.b)({addNewReview:"reviews/add",editReviewsAction:"reviews/edit",showTooltip:"tooltips/show"})),{},{handleDragOver:function(t){t.preventDefault(),this.hovered=!0},handleSubmit:function(t){var e=this;return o()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validate();case 2:if(t.t0=t.sent,!1!==t.t0){t.next=5;break}return t.abrupt("return");case 5:if(e.$validate().reset,t.prev=6,!e.editMode){t.next=15;break}return t.next=10,e.editReviewsAction(e.newReview);case 10:return t.next=12,e.handleReset();case 12:e.showTooltip({text:"Отзыв изменён"}),t.next=20;break;case 15:return t.next=17,e.addNewReview(e.newReview);case 17:return t.next=19,e.handleReset();case 19:e.showTooltip({text:"Отзыв добавлен"});case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(6),e.showTooltip({text:t.t1.response.data.error,type:"error"});case 25:case"end":return t.stop()}}),t,null,[[6,22]])})))()},handleReset:function(){this.$emit("reset",this.emptyFormIsShow)},handleChange:function(t){t.preventDefault();var e=t.dataTransfer?t.dataTransfer.files[0]:t.target.files[0];this.newReview.photo=e,this.renderPhoto(e),this.hovered=!1},renderPhoto:function(t){var e=this,r=new FileReader;r.readAsDataURL(t),r.onloadend=function(){e.newReview.preview=r.result}}}),created:function(){this.editMode&&(this.newReview.author=this.currentReview.author,this.newReview.occ=this.currentReview.occ,this.newReview.text=this.currentReview.text,this.newReview.preview="https://webdev-api.loftschool.com/".concat(this.currentReview.photo),this.newReview.photo={},this.newReview.id=this.currentReview.id)}},b=(r(120),r(18)),R=Object(b.a)(_,l,[],!1,null,"6481bbff",null);R.options.__file="src/admin/components/formReviews/formReviews.vue";var g=R.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("card",[r("div",{staticClass:"user-container",attrs:{slot:"title"},slot:"title"},[r("avatar",{staticClass:"avatar",attrs:{size:"54",src:t.cover}}),t._v(" "),r("div",{staticClass:"userdata"},[r("div",{staticClass:"username"},[t._v(t._s(t.review.author))]),t._v(" "),r("div",{staticClass:"userocc"},[t._v(t._s(t.review.occ))])])],1),t._v(" "),r("div",{staticClass:"review-wrapper",attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"data"},[r("div",{staticClass:"text"},[r("p",[t._v(t._s(t.review.text))])]),t._v(" "),r("div",{staticClass:"btns"},[r("icon",{attrs:{symbol:"pencil",title:"Править"},on:{click:function(e){return t.$emit("edit",e)}}}),t._v(" "),r("icon",{attrs:{symbol:"trash",title:"Удалить"},on:{click:function(e){return t.$emit("remove",e)}}})],1)])])])};y._withStripped=!0;var C=r(73),x=r(98),O={components:{card:v.a,icon:C.default,avatar:x.a},props:{review:Object},computed:{cover:function(){return"https://webdev-api.loftschool.com/".concat(this.review.photo)}}},j=(r(121),Object(b.a)(O,y,[],!1,null,"7b932b0f",null));function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}j.options.__file="src/admin/components/reviewCard/reviewCard.vue";var P={components:{appFormReviews:g,reviewCard:j.exports,squareBtn:p.a},data:function(){return{emptyFormIsShow:!1,editMode:!1,currentReview:{}}},computed:$({},Object(w.c)("reviews",{reviews:function(t){return t.data}})),methods:$($({},Object(w.b)({removeReviewsAction:"reviews/remove",fetchReviews:"reviews/fetch",showTooltip:"tooltips/show"})),{},{FormIsShow:function(t){this.emptyFormIsShow=t,this.editMode=!1},editReviewCard:function(t){this.emptyFormIsShow=!0,this.editMode=!0,this.currentReview=t},removeReview:function(t){var e=this;return o()(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.removeReviewsAction(t);case 2:e.showTooltip({text:"Отзыв удалён"});case 3:case"end":return r.stop()}}),r)})))()}}),mounted:function(){this.fetchReviews()}},k=(r(122),Object(b.a)(P,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-header"},[e("div",{staticClass:"page-title"},[this._v('\n          Блок "Отзывы"\n        ')])])}],!1,null,"2c7c3bd3",null));k.options.__file="src/admin/pages/reviews/reviews.vue";var M=k.exports},63:function(t,e,r){},64:function(t,e,r){},65:function(t,e,r){},66:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=function(){var t=this.$createElement;return(this._self._c||t)(this.type,this._g(this._b({tag:"component"},"component",this.$attrs,!1),this.$listeners))};i._withStripped=!0;var n={props:{type:{type:String,default:"default"}},components:{default:function(){return r.e(7).then(r.bind(null,134))},square:function(){return r.e(10).then(r.bind(null,135))},iconed:function(){return r.e(8).then(r.bind(null,136))},round:function(){return r.e(9).then(r.bind(null,138))}}},s=r(18),a=Object(s.a)(n,i,[],!1,null,null,null);a.options.__file="src/admin/components/button/button.vue";var o=a.exports},67:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return"input"===t.fieldType?r("label",{staticClass:"input",class:[{input_labeled:!!t.title,"no-side-paddings":t.noSidePaddings},t.iconClass,{error:!!t.errorMessage}]},[t.title?r("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),r("input",t._b({staticClass:"input__elem field__elem",domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},"input",t.$attrs,!1)),t._v(" "),r("div",{staticClass:"input__error-tooltip"},[r("tooltip",{attrs:{text:t.errorMessage}})],1)]):"textarea"===t.fieldType?r("label",t._b({staticClass:"textarea",class:{error:!!t.errorMessage}},"label",t.$attrs,!1),[t.title?r("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),r("textarea",{staticClass:"textarea__elem field__elem",class:{error:!!t.errorMessage},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),t._v(" "),r("div",{staticClass:"input__error-tooltip"},[r("tooltip",{attrs:{text:t.errorMessage}})],1)]):t._e()};i._withStripped=!0;var n={inheritAttrs:!1,props:{title:{type:String,default:""},errorMessage:{type:String,default:""},noSidePaddings:Boolean,fieldType:{type:String,default:"input"},value:String|Number,icon:{type:String,default:"",validator:function(t){return["","user","key"].includes(t)}}},computed:{iconClass:function(){var t=this.icon;return t.length?" input_iconed input_icon-".concat(t):""}},components:{tooltip:function(){return r.e(11).then(r.bind(null,137))}}},s=(r(68),r(18)),a=Object(s.a)(n,i,[],!1,null,"b4a4ba36",null);a.options.__file="src/admin/components/input/input.vue";var o=a.exports},68:function(t,e,r){"use strict";var i=r(63);r.n(i).a},69:function(t,e,r){},70:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.simple?r("div",{staticClass:"card-component card_plain"},[t._t("default")],2):r("div",{staticClass:"card-component"},[r("div",{staticClass:"header"},[r("div",{staticClass:"text",domProps:{textContent:t._s(t.title)}}),t._v(" "),!1==!!t.title?t._t("title"):t._e()],2),t._v(" "),r("div",{staticClass:"content"},[t._t("content")],2)])};i._withStripped=!0;var n={props:{title:{type:String,default:""},simple:Boolean}},s=(r(71),r(18)),a=Object(s.a)(n,i,[],!1,null,"29953562",null);a.options.__file="src/admin/components/card/card.vue";var o=a.exports},71:function(t,e,r){"use strict";var i=r(64);r.n(i).a},72:function(t,e,r){"use strict";var i=r(65);r.n(i).a},73:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var i=function(){var t=this.$createElement;return(this._self._c||t)("button",this._g({class:["icon-component",this.iconClass,{grayscale:this.grayscale},{"no-words":!1==!!this.title}],attrs:{"data-text":this.title,type:"button"}},this.$listeners))};i._withStripped=!0;var n={props:{symbol:{type:String,default:"pencil",validator:function(t){return["pencil","cross","tick","trash"].includes(t)}},grayscale:{type:Boolean},title:{type:String,default:""}},computed:{iconClass:function(){return"is-".concat(this.symbol)}}},s=(r(72),r(18)),a=Object(s.a)(n,i,[],!1,null,"325d0eef",null);a.options.__file="src/admin/components/icon/icon.vue";var o=a.exports},80:function(t,e,r){"use strict";var i=r(69);r.n(i).a},89:function(t,e,r){},90:function(t,e,r){},91:function(t,e,r){},98:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar-component",style:this.measures},[e("img",this._b({staticClass:"image",attrs:{alt:"user picture"}},"img",this.$attrs,!1))])};i._withStripped=!0;var n={props:{size:{type:String,default:"50"}},computed:{measures:function(){var t=Number(this.size);return{width:"".concat(t,"px"),height:"".concat(t,"px")}}}},s=(r(80),r(18)),a=Object(s.a)(n,i,[],!1,null,"3142f16f",null);a.options.__file="src/admin/components/avatar/avatar.vue";var o=a.exports}}]);